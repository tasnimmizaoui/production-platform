apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: production-platform

# Base resources
resources:
  - ../../base/namespace.yaml
  - ../../base/configmap.yaml
  - ../../base/redis
  - ../../base/api
  - ../../base/worker

# Image tag updates (managed by CI/CD)
images:
  - name: tasnimmizaoui/production-platform-api
    newTag: latest  # Will be updated by GitHub Actions
  - name: tasnimmizaoui/production-platform-worker
    newTag: latest  # Will be updated by GitHub Actions

# Production-specific patches
patchesStrategicMerge:
  - patches/resource-limits.yaml

# Labels applied to all resources
commonLabels:
  environment: production
  managed-by: argocd
